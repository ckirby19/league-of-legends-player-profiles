High-Level Approach

Our coaching agent transforms raw League of Legends match timelines into concise, human-readable insights by combining per-minute probabilistic modeling, spatial analysis, and event attribution. The end goal is to translate numerical signals into meaningful coaching feedback.

The overall pipeline is:

- Data Ingestion: Retrieve match summaries and timelines from the Riot API through AWS Lambda, and cache them in S3 for reusability.

- Feature Extraction: Compact and extract key minute-level features such as team gold, experience, creep score, aggregated event counts, and player positions.

- Win Expectancy Modeling: Compute a per-minute win probability curve using a variant of the Pythagorean Expectation adapted for LoL’s gold and XP data.

- Momentum Attribution: Derive minute-to-minute momentum as discrete deltas in win probability (ΔPₜ = Pₜ − Pₜ₋₁) and attribute these changes to the most relevant in-game events.

- Impact Ranking: Rank events by absolute impact (|ΔP|) and surface the most decisive plays with full context — what happened, who was involved, and where it occurred on the map.

- Coaching Insight Generation: Provide the compacted summaries and impactful event list to an LLM, which translates them into short, actionable coaching suggestions. LLM responses are cached in S3 to avoid repeated Bedrock calls for the same match.

All of this data feeds into the Match Momentum Dashboard, which combines:

- A Win Probability Chart showing how advantage evolved over time

- A Momentum Impact View highlighting the most decisive minutes

- A Map Visualizer (KDE heatmap + event markers) revealing spatial tendencies

- A Coaching Panel that presents concise LLM-generated recommendations

A secondary multi-match dashboard aggregates recent games, summarizing average K/D/A, gold, and XP metrics, and uses these as input for higher-level LLM insights that evaluate overall player trends.

Core calculations and logic

In competitive games like League of Legends, momentum describes how control shifts between teams over time — a reflection of which side dictates tempo, secures objectives, and sustains pressure.
To quantify this, we adapted the Pythagorean Expectation a concept from baseball analytics developed by Bill James, replacing runs with in-game resources such as gold and experience.

Applying this frame-by-frame yields an evolving win probability curve. The discrete differences between minutes form our Momentum Impact, which captures the magnitude of each swing in control.

Where things happen can be just as insightful as what has happened. So to complement this temporal analysis, we incorporated a Kernel Density Estimation (KDE) layer to visualise player movement and positioning across the map.
We do this by transforming discrete player locations into a continuous probability surface. The resulting heatmap highlights ‘hot’ zones, where players have spent the most time or had the highest activity density.
Red regions represent strong presence, whereas blue areas represent less activity. The goal is to identify tendencies such as: lane focus, roaming patterns or control zone within one visual.

Data sources and augmentation

- Primary: Riot match V5 API timeline and match summary endpoints (per‑frame participant stats and event logs).
- Derived features: minute‑level aggregates (team totals), event counts and types, KDE density maps, and compacted JSON used for caching and LLM inputs.
- Historical Context: Aggregation over a player’s recent matches to identify recurring patterns in performance

All insights are derived from these official sources — no external datasets are required.

What we discovered and learned

- LLM Prompt Design: To keep coaching outputs focused and avoid hallucinations, prompts must be tightly scoped to the top few impactful minutes and summarized event lists. Reducing token count across multi-match summaries remains an area for improvement.
- Caching and Performance: S3 caching dramatically reduced load times and API costs, improving user experience when switching between matches.
- Spatial Insight Value: The KDE visualizer not only enhances the dashboard’s appeal but also provides novel insights into player movement, control zones, and engagement density — effectively bridging raw analytics with intuitive spatial storytelling.